<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
 <mapper namespace="com.pet.model.StoreDAO">
    <!-- Admin 입력 페이지 쿼리 -->
    <insert id="insert" parameterType="com.pet.model.StoreDTO">
	    INSERT INTO STORE
	    	(STORE_CODE,STORE_ID,STORE_PASSWORD, STORE_NAME, STORE_COST, STORE_PAYMENT, STORE_INCOME, STORE_RENTCOST, STORE_DOCTOR, STORE_WORKER, STORE_DATE )
	    VALUES
	    	(#{store_code},#{store_id},#{store_password},#{store_name},#{store_cost},#{store_payment},#{store_income},#{store_rentCost},#{store_doctor},#{store_worker},SYSDATE)
    </insert>
   <!-- Admin목록 페이지 쿼리 -->
    <select id="getSelectAll" resultType="com.pet.model.StoreDTO">
     SELECT * FROM STORE
    </select>
    <select id="adminUpdate"   resultType="com.pet.model.StoreDTO" parameterType="com.pet.model.StoreDTO">
    SELECT * FROM STORE WHERE STORE_CODE = #{store_code}
    
    </select>
    <!-- 수정기능 -->
    <update id="adminUpdatePro">
    UPDATE STORE SET STORE_ID=#{store_id} ,STORE_PASSWORD=#{store_password} , STORE_NAME= #{store_name}, STORE_COST= #{store_cost}, STORE_PAYMENT= #{store_payment}, STORE_INCOME=#{store_income}, STORE_RENTCOST= #{store_rentCost}, STORE_DOCTOR= #{store_doctor}, STORE_WORKER=#{store_worker}  WHERE Store_Code = #{store_code}
    </update>
    <!-- 삭제기능 -->
    <delete id="adminDelete">
    DELETE FROM STORE WHERE STORE_CODE = #{store_code}
    </delete>
	<!-- 페이징 카운트 -->
	<select id ="getListCount" resultType= "Integer">
		SELECT COUNT(*)
		FROM STORE
	</select>
	<!-- 패이징 처리기능 -->
	<select id="getPageSelectAll" resultType = "com.pet.model.StoreDTO" parameterType="com.pet.model.PageDTO">
		SELECT *
		FROM (
				SELECT ROWNUM R, A.*
				FROM (SELECT *
							FROM STORE
							ORDER BY STORE_DATE DESC) A)
		WHERE R BETWEEN #{startNum} AND #{endNum}
	</select>
	
	<!-- 검색기능 -->
	<select id="searchStore"  resultType="com.pet.model.StoreDTO" parameterType="com.pet.model.StoreDTO">
	SELECT * 
	FROM STORE
	WHERE STORE_NAME LIKE '%${store_name}%'	
	</select>
	
	<insert id="reportPro"  parameterType="com.pet.model.ReportDTO">
	 INSERT INTO REPORT
	    	(REPORT_STORENAME, REPORT_POSITION, REPORT_DATE,REPORT_WRITER,REPORT_CONTENTS )
	    VALUES
	    	(#{report_storeName},#{report_position},SYSDATE,#{report_writer},#{report_contents})
	
	</insert>
	
	<select id="getReportList" resultType="com.pet.model.ReportDTO" parameterType="com.pet.model.ReportDTO">
	SELECT * FROM REPORT
	</select>
	
 </mapper>