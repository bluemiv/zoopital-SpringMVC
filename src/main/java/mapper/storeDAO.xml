<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
 <mapper namespace="com.pet.model.StoreDAO">
    <!-- Admin 입력 페이지 쿼리 -->
    <insert id="insert" parameterType="com.pet.model.StoreDTO">
	    INSERT INTO STORE
	    	(STORE_CODE,STORE_ID,STORE_PASSWORD, STORE_NAME, STORE_COST, STORE_PAYMENT, STORE_INCOME, STORE_RENTCOST, STORE_DOCTOR, STORE_WORKER, STORE_DATE, STORE_ENABLED, STORE_ROLE )
	    VALUES
	    	(#{store_code},#{store_id},#{store_password},#{store_name},#{store_cost},#{store_payment},#{store_income},#{store_rentCost},#{store_doctor},#{store_worker},SYSDATE, #{store_enabled}, #{store_role})
    </insert>
   <!-- Admin목록 페이지 쿼리 -->
    <select id="getSelectAll" resultType="com.pet.model.StoreDTO">
		SELECT *
		FROM STORE
    </select>
    <select id="adminUpdate"   resultType="com.pet.model.StoreDTO" parameterType="com.pet.model.StoreDTO">
	    SELECT *
	    FROM STORE
	    WHERE STORE_CODE = #{store_code}
    </select>
    <!-- 수정기능 -->
    <update id="adminUpdatePro">
    	UPDATE STORE
    	<set>
    		<if test="store_id != null and store_id != ''">
    			STORE_ID=#{store_id},
    		</if>
    		<if test="store_password != null and store_password != ''">
    			STORE_PASSWORD=#{store_password},
    		</if>
    		<if test="store_name != null and store_name != ''">
    			STORE_NAME=#{store_name},
    		</if>
    		<if test="store_cost != null and store_cost != ''">
    			STORE_COST=#{store_cost},
    		</if>
    		<if test="store_payment != null and store_payment != ''">
    			STORE_PAYMENT=#{store_payment},
    		</if>
    		<if test="store_income != null and store_income != ''">
    			STORE_INCOME=#{store_income},
    		</if>
    		<if test="store_rentCost != null and store_rentCost != ''">
    			STORE_RENTCOST=#{store_rentCost},
    		</if>
    		<if test="store_doctor != null and store_doctor != ''">
    			STORE_DOCTOR=#{store_doctor},
    		</if>
    		<if test="store_worker != null and store_worker != ''">
    			STORE_WORKER=#{store_worker},
    		</if>
    		<if test="store_enabled != null and store_enabled != ''">
    			STORE_ENABLED=#{store_enabled},
    		</if>
    		<if test="store_role != null and store_role != ''">
    			STORE_ROLE=#{store_role}
    		</if>
    	</set>
    	WHERE STORE_CODE = #{store_code}
    </update>
    <!-- 삭제기능 -->
    <delete id="adminDelete">
	    DELETE
	    FROM STORE
	    WHERE STORE_CODE = #{store_code}
    </delete>
	<!-- 페이징 카운트 -->
	<select id ="getListCount" resultType= "Integer">
		SELECT COUNT(*)
		FROM STORE
	</select>
	<!-- 패이징 처리기능 -->
	<select id="getPageSelectAll" resultType = "com.pet.model.StoreDTO" parameterType="com.pet.model.PageDTO">
		SELECT *
		FROM (
				SELECT ROWNUM R, A.*
				FROM (SELECT *
							FROM STORE
							ORDER BY STORE_DATE DESC) A)
		WHERE R BETWEEN #{startNum} AND #{endNum}
	</select>
	
	<!-- 검색기능 -->
	<select id="searchStore"  resultType="com.pet.model.StoreDTO" parameterType="com.pet.model.StoreDTO">
		SELECT * 
		FROM STORE
		WHERE STORE_NAME LIKE '%${store_name}%'	
	</select>
 </mapper>